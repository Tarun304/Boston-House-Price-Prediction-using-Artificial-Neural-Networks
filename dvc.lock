schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: src/data/data_ingestion.py
      hash: md5
      md5: f1b0f7e77ea547ada4b4fb10536bbbd0
      size: 2841
    params:
      params.yaml:
        data_ingestion:
          raw_data_path: data/raw
    outs:
    - path: data/raw/boston.csv
      hash: md5
      md5: 816accbde67bef53bf4ba77861bc2900
      size: 37652
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: data/raw/boston.csv
      hash: md5
      md5: 816accbde67bef53bf4ba77861bc2900
      size: 37652
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: a2a1164e3b9601a62b883458f786f5e4
      size: 6807
    params:
      params.yaml:
        data_preprocessing:
          raw_data_file: data/raw/boston.csv
          interim_data_path: data/interim
          test_size: 0.2
          random_state: 42
          winsorize_limits:
          - 0.05
          - 0.1
          drop_columns:
          - CHAS
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: e754569dd34f763ec506cd2667b6cbb7
      size: 7565
    - path: data/interim/train.csv
      hash: md5
      md5: f9956fb2afc1b61563bc4e8236e36813
      size: 29783
  feature_engineering:
    cmd: python src/features/feature_engineering.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: e754569dd34f763ec506cd2667b6cbb7
      size: 7565
    - path: data/interim/train.csv
      hash: md5
      md5: f9956fb2afc1b61563bc4e8236e36813
      size: 29783
    - path: src/features/feature_engineering.py
      hash: md5
      md5: fc703203c7776014811294ccc1b6f2e1
      size: 7639
    params:
      params.yaml:
        feature_engineering:
          interim_train_file: data/interim/train.csv
          interim_test_file: data/interim/test.csv
          processed_data_path: data/processed
          n_features: 5
          random_state: 42
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: c11fef90b76e1a279a4777b25d7a5431
      size: 10146
    - path: data/processed/X_train.csv
      hash: md5
      md5: 95065015fe23a48b2e58cd3400fed642
      size: 40133
    - path: data/processed/y_test.csv
      hash: md5
      md5: 1940fea854c6c21de3515408db08d8b4
      size: 618
    - path: data/processed/y_train.csv
      hash: md5
      md5: a8c0b5d4ec4e3ab9a435cb3700cf2d66
      size: 2430
    - path: models/scaler.pkl
      hash: md5
      md5: 1d521e6215b5b6ac4b49b0395f997859
      size: 1191
    - path: models/selected_features.pkl
      hash: md5
      md5: 7316f6c12ad78ca8490ab584379a1bc5
      size: 48
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: c11fef90b76e1a279a4777b25d7a5431
      size: 10146
    - path: data/processed/X_train.csv
      hash: md5
      md5: 95065015fe23a48b2e58cd3400fed642
      size: 40133
    - path: data/processed/y_test.csv
      hash: md5
      md5: 1940fea854c6c21de3515408db08d8b4
      size: 618
    - path: data/processed/y_train.csv
      hash: md5
      md5: a8c0b5d4ec4e3ab9a435cb3700cf2d66
      size: 2430
    - path: src/model/model_building.py
      hash: md5
      md5: 2c742badf1e35bb28bdd6b7d389c864b
      size: 5611
    params:
      params.yaml:
        model_building:
          X_train_file: data/processed/X_train.csv
          y_train_file: data/processed/y_train.csv
          X_test_file: data/processed/X_test.csv
          y_test_file: data/processed/y_test.csv
          model_output_path: models
          model_name: best_model.keras
          units: 64
          num_layers: 1
          learning_rate: 0.01
          epochs: 100
          batch_size: 32
          patience: 10
    outs:
    - path: models/best_model.keras
      hash: md5
      md5: 3e1be72ffcc1e7bc9f46a6dd5e91b8a0
      size: 26345
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: c11fef90b76e1a279a4777b25d7a5431
      size: 10146
    - path: data/processed/y_test.csv
      hash: md5
      md5: 1940fea854c6c21de3515408db08d8b4
      size: 618
    - path: models/best_model.keras
      hash: md5
      md5: 3e1be72ffcc1e7bc9f46a6dd5e91b8a0
      size: 26345
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 1a372a9ba8324d47c8067013848e97f0
      size: 9208
    params:
      params.yaml:
        model_building:
          X_train_file: data/processed/X_train.csv
          y_train_file: data/processed/y_train.csv
          X_test_file: data/processed/X_test.csv
          y_test_file: data/processed/y_test.csv
          model_output_path: models
          model_name: best_model.keras
          units: 64
          num_layers: 1
          learning_rate: 0.01
          epochs: 100
          batch_size: 32
          patience: 10
        model_evaluation:
          X_test_file: data/processed/X_test.csv
          y_test_file: data/processed/y_test.csv
          model_path: models/best_model.keras
          metrics_file: reports/metrics.json
    outs:
    - path: reports/experiment_info.json
      hash: md5
      md5: 721d7cd3e483a25cc902f88caea70ac9
      size: 216
    - path: reports/metrics.json
      hash: md5
      md5: b6796dfeb01fb21eefe4db14649db500
      size: 100
  register_model:
    cmd: python src/model/model_registration.py
    deps:
    - path: reports/experiment_info.json
      hash: md5
      md5: 721d7cd3e483a25cc902f88caea70ac9
      size: 216
    - path: src/model/model_registration.py
      hash: md5
      md5: 848d8e88dd434ff60ddae737ad1889fd
      size: 5469
